# Telegram Bot + LM Studio

Этот репозиторий содержит Go-приложение для запуска Telegram-бота, интегрированного с LM Studio. Бот может быть настроен для использования метода опроса (polling) или webhook для взаимодействия с пользователями. Приложение имеет графический интерфейс, созданный с использованием [Fyne framework](https://fyne.io/), который позволяет пользователям настраивать параметры бота, выбирать модели и управлять пользователями.

## Возможности

- **Управление ботом**: Запуск и остановка Telegram-бота через интерфейс.
- **Настройки конфигурации**: Легкая настройка адреса API бота, токена, метода обновления (polling/webhook), данных для webhook и других параметров.
- **Управление моделями**: Выбор модели из доступных, обновление списка моделей.
- **Управление пользователями**: Просмотр и обновление статуса доступа пользователей в системе.
- **Логи**: Просмотр логов бота в реальном времени.

## Требования

- Go (1.19+)
- Fyne (GUI framework)
- Токен Telegram-бота (полученный от [BotFather](https://core.telegram.org/bots#botfather))

## Установка

1. Клонируйте этот репозиторий:
    ```sh
    git clone https://github.com/yourusername/telegram-bot-lmstudio.git
    cd telegram-bot-lmstudio
    ```

2. Установите необходимые зависимости Go:
    ```sh
    go get fyne.io/fyne/v2
    ```

3. Соберите и запустите приложение:
    ```sh
    go run main.go
    ```

## Конфигурация

При запуске приложения пользователю предлагается настроить несколько параметров:

- **API Address**: Адрес API LM Studio (например, `http://localhost:1234`).
- **Max Tokens**: Лимит токенов для модели.
- **Timeout**: Время ожидания (тайм-аут) в секундах для опроса.
- **Bot Token**: Токен Telegram-бота, полученный от BotFather.
- **Update Method**: Выберите между "polling" или "webhook" для получения обновлений.
- **Webhook Domain/Port**: Данные для настройки webhook (только для метода webhook).
- **System Role**: Системная роль, используемая в конфигурации LM Studio.
- **LM Studio Mode**: Выберите между режимами "stream" или "full" для взаимодействия с LM Studio.
- **Language**: Выберите язык для бота (например, английский или русский).

## Управление ботом

Вы можете запустить и остановить Telegram-бота во вкладке **Bot**. Бот взаимодействует с пользователями Telegram в зависимости от выбранной модели и конфигурации. Бот записывает все взаимодействия в логи, которые отображаются в реальном времени в интерфейсе.

- **Polling**: Бот регулярно проверяет новые сообщения.
- **Webhook**: Бот слушает входящие запросы на указанном домене и порте для webhook.

## Управление пользователями

Во вкладке **Users** отображается список пользователей, их ID, имя пользователя и статус доступа (разрешен/не разрешен). Вы можете включать или отключать доступ пользователей, обновляя флажок "Allowed".

## Логи

Вкладка **Bot** также отображает логи, показывающие запросы, полученные ботом. Логи обновляются каждые 2 секунды для обеспечения отображения в реальном времени.

## Лицензия

Этот проект лицензирован по лицензии MIT — см. файл [LICENSE](LICENSE) для получения подробной информации.